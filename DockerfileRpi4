# Use ARM32-compatible Debian base
FROM debian:bookworm-slim

# Install dependencies and download BellSoft JDK 21 for ARM32
RUN apt-get update && \
    apt-get install -y wget ca-certificates && \
    wget https://download.bell-sw.com/java/21.0.5+11/bellsoft-jdk21.0.5+11-linux-arm32-vfp-hflt.deb && \
    apt-get install -y ./bellsoft-jdk21.0.5+11-linux-arm32-vfp-hflt.deb && \
    rm bellsoft-jdk21.0.5+11-linux-arm32-vfp-hflt.deb && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /opt/server
COPY Cosmic.jar ./Server.jar
COPY scripts ./scripts/
COPY config.yaml ./

EXPOSE 8484 7575 7576 7577
ENTRYPOINT ["java", "-jar", "./Server.jar"]
